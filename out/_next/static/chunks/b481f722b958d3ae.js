(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},26707,e=>{"use strict";let t=(0,e.i(75254).default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>t],26707)},80949,e=>{"use strict";var t=e.i(43476),s=e.i(94690),a=e.i(81239),l=e.i(71645),r=e.i(86311);let d=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var i=e.i(78583),n=e.i(61911),o=e.i(7233),c=e.i(27612),x=e.i(88511),m=e.i(43531),h=e.i(26707),g=e.i(55436),b=e.i(45423),p=e.i(3116),u=e.i(78894),f=e.i(7341),k=e.i(7471);function j(){let e,j,N,{activeStore:v}=(0,s.useAuth)(),{showToast:w}=(0,a.useToast)(),[y,S]=(0,l.useState)("compose"),[C,M]=(0,l.useState)("sms"),[A,T]=(0,l.useState)(""),[$,P]=(0,l.useState)("all"),[H,V]=(0,l.useState)(null),[E,R]=(0,l.useState)(0),[B,U]=(0,l.useState)([]),[z,F]=(0,l.useState)(1),[L,q]=(0,l.useState)(10),[D,W]=(0,l.useState)(0),[I,G]=(0,l.useState)(0),[O,K]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{if(v?.id&&await (0,f.loadSMSConfigFromDB)(v.id),V((0,f.getSMSConfig)()),R(await (0,f.getSMSBalance)()),v?.id){let{count:e}=await k.supabase.from("customers").select("*",{count:"exact",head:!0}).eq("store_id",v.id);e&&G(e)}})()},[v]),(0,l.useEffect)(()=>{(async()=>{if("history"===y&&v?.id){let{data:e,count:t}=await (0,f.getSMSHistory)(v.id,z,L);U(e),W(t||0)}})()},[y,z,L,v]);let _="all"===$?I:"manual"===$?+!!A:Math.floor(.3*I),{segments:J,cost:Q,isUnicode:X}=(j=(e=/[^\u0000-\u00ff]/.test(A))?70:160,{segments:N=Math.ceil(Math.max(A.length,1)/j),cost:(_*N*.035).toFixed(3),isUnicode:e,segmentSize:j}),[Y,Z]=(0,l.useState)([]);if(!v)return null;let ee=async()=>{if(!A.trim())return;K(!0);let e="sms"===C?["sms"]:["whatsapp"],t=0;try{if("manual"===$){let s=document.querySelector('textarea[placeholder="Enter phone numbers separated by commas..."]');if(s&&s.value)for(let a of s.value.split(",").map(e=>e.trim()).filter(e=>e.length>0))await (0,f.sendDirectMessage)(a,A,e,v.id),t++}else if("all"===$||"group"===$){let{data:s}=await k.supabase.from("customers").select("phone, name").limit(50);if(s){for(let a of s)if(a.phone){let s=A.replace("{Name}",a.name).replace("{StoreName}",v.name);s=s.replace("{Points}","0").replace("{LastVisit}","N/A").replace("{Staff}","N/A").replace("{Receipt}","N/A"),await (0,f.sendDirectMessage)(a.phone,s,e,v.id),t++}}}w("success",`Successfully sent ${C.toUpperCase()} to ${t} recipients.`),T("")}catch(e){console.error("Sending failed",e),w("error","Failed to send broadcast. Check console.")}finally{K(!1)}};return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsx)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Customer Communication"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Send bulk SMS & WhatsApp campaigns to your customers."})]})}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)("div",{className:"w-full lg:w-64 flex-shrink-0 space-y-2",children:[(0,t.jsxs)("button",{onClick:()=>S("compose"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${"compose"===y?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-white text-slate-600 hover:bg-slate-50 dark:bg-slate-900 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:[(0,t.jsx)(d,{className:"h-5 w-5"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Compose"}),(0,t.jsx)("div",{className:"text-xs opacity-80",children:"Send new campaign"})]})]}),(0,t.jsxs)("button",{onClick:()=>S("templates"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${"templates"===y?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-white text-slate-600 hover:bg-slate-50 dark:bg-slate-900 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:[(0,t.jsx)(i.FileText,{className:"h-5 w-5"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Templates"}),(0,t.jsx)("div",{className:"text-xs opacity-80",children:"Manage saved messages"})]})]}),(0,t.jsxs)("button",{onClick:()=>S("automations"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${"automations"===y?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-white text-slate-600 hover:bg-slate-50 dark:bg-slate-900 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:[(0,t.jsx)(b.Bell,{className:"h-5 w-5"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Automations"}),(0,t.jsx)("div",{className:"text-xs opacity-80",children:"Welcome & Receipts"})]})]}),(0,t.jsxs)("button",{onClick:()=>S("history"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${"history"===y?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-white text-slate-600 hover:bg-slate-50 dark:bg-slate-900 dark:text-slate-400 dark:hover:bg-slate-800"}`,children:[(0,t.jsx)(p.Clock,{className:"h-5 w-5"}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-semibold",children:"History"}),(0,t.jsx)("div",{className:"text-xs opacity-80",children:"View Sent Logs"})]})]}),(0,t.jsxs)("div",{className:"mt-8 rounded-xl bg-indigo-50 p-4 dark:bg-indigo-900/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg text-indigo-600 dark:bg-indigo-900/40 dark:text-indigo-400",children:(0,t.jsx)(r.MessageSquare,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100",children:"Credits"}),(0,t.jsx)("p",{className:"text-xs text-indigo-700 dark:text-indigo-300",children:"Balance Available"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-end border-t border-indigo-100 dark:border-indigo-800/50 pt-3 mt-3",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:E.toFixed(2)}),(0,t.jsx)("button",{className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 underline dark:text-indigo-400",children:"Top Up"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:["compose"===y&&(0,t.jsx)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Select Channel"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("button",{onClick:()=>M("sms"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl border-2 transition-all ${"sms"===C?"border-indigo-600 bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-300":"border-slate-200 hover:border-slate-300 dark:border-slate-700 dark:hover:border-slate-600"}`,children:[(0,t.jsx)(h.Smartphone,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-semibold",children:"SMS"})]}),(0,t.jsxs)("button",{onClick:()=>M("whatsapp"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl border-2 transition-all ${"whatsapp"===C?"border-green-600 bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-300":"border-slate-200 hover:border-slate-300 dark:border-slate-700 dark:hover:border-slate-600"}`,children:[(0,t.jsx)(r.MessageSquare,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-semibold",children:"WhatsApp"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Recipients"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:[{id:"all",label:`All Customers (${I})`},{id:"group",label:"Customer Groups"},{id:"manual",label:"Manual Input"}].map(e=>(0,t.jsx)("button",{onClick:()=>P(e.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${$===e.id?"bg-slate-800 text-white dark:bg-white dark:text-slate-900":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-400"}`,children:e.label},e.id))}),"manual"===$&&(0,t.jsx)("textarea",{placeholder:"Enter phone numbers separated by commas...",className:"w-full rounded-lg border border-slate-200 bg-slate-50 p-3 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white h-24 resize-none"}),"group"===$&&(0,t.jsxs)("select",{className:"w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2.5 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white",children:[(0,t.jsx)("option",{children:"VIP Customers"}),(0,t.jsx)("option",{children:"New Signups (Last 30 Days)"}),(0,t.jsx)("option",{children:"Inactive Users"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Message Content"}),(0,t.jsx)("button",{className:"text-xs text-indigo-600 hover:underline font-medium",onClick:()=>T(""),children:"Clear"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{value:A,onChange:e=>T(e.target.value),placeholder:"Type your message here...",className:"w-full h-40 rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-700 dark:bg-slate-800 dark:text-white resize-none"}),(0,t.jsxs)("div",{className:`absolute bottom-3 right-3 text-xs ${X?"text-amber-600 font-bold":"text-slate-400"}`,children:[A.length," chars â€¢ ",J," SMS ",X&&"(Unicode)"]})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-slate-500 mb-2 uppercase tracking-wide",children:"Insert Placeholder"}),(0,t.jsx)("div",{className:"flex gap-2",children:["{Name}","{StoreName}","{Points}","{LastVisit}","{Staff}","{Receipt}"].map(e=>(0,t.jsx)("button",{onClick:()=>{T(t=>t+" "+e+" ")},className:"px-2 py-1 rounded bg-slate-100 text-xs font-mono text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 border border-slate-200 transition-colors dark:bg-slate-800 dark:border-slate-700 dark:text-slate-400",children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[(0,t.jsxs)("div",{className:"text-sm text-slate-500 mr-auto",children:["Estimated cost: ",(0,t.jsxs)("span",{className:"font-bold text-slate-900 dark:text-white",children:["GHS ",Q]})]}),(0,t.jsx)("button",{className:"px-6 py-2.5 rounded-lg border border-slate-200 text-sm font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800",children:"Schedule Later"}),(0,t.jsxs)("button",{onClick:ee,disabled:!A.trim()||O,className:"flex items-center gap-2 px-6 py-2.5 rounded-lg bg-indigo-600 text-sm font-bold text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 active:bg-indigo-800 disabled:opacity-50 disabled:shadow-none",children:[(0,t.jsx)(d,{className:`h-4 w-4 ${O?"animate-spin":""}`}),O?"Sending...":"Send Broadcast"]})]})]})}),"templates"===y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"relative max-w-sm w-full",children:[(0,t.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search templates...",className:"w-full pl-9 pr-4 py-2 rounded-lg border border-slate-200 bg-white text-sm outline-none focus:ring-2 focus:ring-indigo-500/20 dark:bg-slate-900 dark:border-slate-800"})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-sm font-medium text-white hover:bg-indigo-700",children:[(0,t.jsx)(o.Plus,{className:"h-4 w-4"}),"Create Template"]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:Y.map(e=>(0,t.jsxs)("div",{className:"group relative rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition-all hover:border-indigo-300 hover:shadow-md dark:border-slate-800 dark:bg-slate-900 dark:hover:border-indigo-900",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white",children:e.title}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded dark:hover:bg-indigo-900/20",children:(0,t.jsx)(x.Edit,{className:"h-4 w-4"})}),(0,t.jsx)("button",{className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded dark:hover:bg-red-900/20",children:(0,t.jsx)(c.Trash2,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-3 bg-slate-50 dark:bg-slate-800 p-3 rounded-lg border border-slate-100 dark:border-slate-700/50",children:e.content}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)("button",{onClick:()=>{T(e.content),S("compose")},className:"text-xs font-semibold text-indigo-600 hover:underline dark:text-indigo-400",children:"Use this template"})})]},e.id))})]}),"automations"===y&&H&&(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900 text-slate-900 dark:text-white",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold",children:"Automated Notifications"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Configure messages sent automatically to customers."})]}),(0,t.jsx)("button",{onClick:()=>{H&&v?.id?((0,f.updateSMSConfig)(H,v.id),w("success","Settings Saved Successfully!")):w("error","Error: No active store found. Cannot save settings.")},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg text-sm transition-colors",children:"Save Changes"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(n.Users,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),(0,t.jsx)("label",{className:"font-semibold text-sm uppercase tracking-wide",children:"New Customer Welcome"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Sent when a new customer is registered during checkout."}),(0,t.jsx)("textarea",{value:H.templates.welcome,onChange:e=>V({...H,templates:{...H.templates,welcome:e.target.value}}),className:"w-full h-24 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-2",children:["Available Variables: ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Name}"})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(h.Smartphone,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),(0,t.jsx)("label",{className:"font-semibold text-sm uppercase tracking-wide",children:"Purchase Receipt"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Sent after every successful transaction."}),(0,t.jsx)("textarea",{value:H.templates.receipt,onChange:e=>V({...H,templates:{...H.templates,receipt:e.target.value}}),className:"w-full h-24 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"}),(0,t.jsx)("textarea",{value:H.templates.receipt,onChange:e=>V({...H,templates:{...H.templates,receipt:e.target.value}}),className:"w-full h-24 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-2",children:["Available Variables: ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Amount}"})," ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Receipt}"})," ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{PointsEarned}"})," ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{TotalPoints}"})," ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Staff}"})]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(b.Bell,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),(0,t.jsx)("label",{className:"font-semibold text-sm uppercase tracking-wide",children:"Owner Sale Alert"})]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Notification sent to you (the owner) when a sale is made."}),(0,t.jsx)("textarea",{value:H.templates.ownerSale||"",onChange:e=>V({...H,templates:{...H.templates,ownerSale:e.target.value}}),className:"w-full h-24 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 p-3 text-sm focus:ring-2 focus:ring-indigo-500 outline-none",placeholder:"New sale: GHS {Amount} by {Name}..."}),(0,t.jsxs)("p",{className:"text-xs text-slate-400 mt-2",children:["Available Variables: ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Amount}"})," ",(0,t.jsx)("span",{className:"font-mono bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"{Name}"})]})]})]})]}),"history"===y&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Communication Logs"}),(0,t.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"History of all sent messages."})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Total Sent: ",D]})})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900 overflow-hidden",children:[0===B.length?(0,t.jsx)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:"No messages found in history."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-slate-100",children:"Date/Time"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-slate-100",children:"Recipient"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-slate-100",children:"Channel"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-slate-100",children:"Message"}),(0,t.jsx)("th",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-slate-100",children:"Status"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:B.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-800/20",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 dark:text-slate-400",children:new Date(e.created_at).toLocaleString()}),(0,t.jsx)("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:e.phone}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${"whatsapp"===e.channel?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/20 dark:text-indigo-400"}`,children:["whatsapp"===e.channel?(0,t.jsx)(r.MessageSquare,{className:"h-3 w-3"}):(0,t.jsx)(h.Smartphone,{className:"h-3 w-3"}),"sms"===e.channel?"SMS":"WhatsApp"]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-400 max-w-xs truncate",title:e.message,children:e.message}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${"sent"===e.status?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:["sent"===e.status?(0,t.jsx)(m.Check,{className:"h-3 w-3"}):(0,t.jsx)(u.AlertTriangle,{className:"h-3 w-3"}),"sent"===e.status?"Sent":"Failed"]})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border-t border-slate-100 dark:border-slate-800",children:[(0,t.jsx)("button",{disabled:1===z,onClick:()=>F(e=>Math.max(1,e-1)),className:"px-4 py-2 text-sm text-slate-600 dark:text-slate-400 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-slate-500",children:["Page ",z]}),(0,t.jsx)("button",{disabled:B.length<L,onClick:()=>F(e=>e+1),className:"px-4 py-2 text-sm text-slate-600 dark:text-slate-400 disabled:opacity-50 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:"Next"})]})]})]})]})]})]})}e.s(["default",()=>j],80949)}]);