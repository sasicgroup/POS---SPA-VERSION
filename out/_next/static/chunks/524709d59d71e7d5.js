(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},15057,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);e.s(["ArrowUpRight",()=>t],15057)},30257,e=>{"use strict";var t=e.i(43476),s=e.i(94690),a=e.i(7471),l=e.i(25652),r=e.i(61911),i=e.i(50965),d=e.i(12426),o=e.i(15057),n=e.i(3116),c=e.i(22016),m=e.i(71645);function x(){let{activeStore:e,isLoading:x}=(0,s.useAuth)(),[h,u]=(0,m.useState)({revenue:0,orders:0,customers:0,productsSold:0}),[g,p]=(0,m.useState)([]),[f,b]=(0,m.useState)("7d");(0,m.useEffect)(()=>{e&&v()},[e]);let v=async()=>{let{data:t}=await a.supabase.from("sales").select("*").eq("store_id",e?.id),s=t?.reduce((e,t)=>e+(t.total_amount||0),0)||0,l=t?.length||0,{count:r}=await a.supabase.from("customers").select("*",{count:"exact",head:!0}).eq("store_id",e?.id),{data:i}=await a.supabase.from("sales").select("*, customers(name)").eq("store_id",e?.id).order("created_at",{ascending:!1}).limit(5);u({revenue:s,orders:l,customers:r||0,productsSold:l}),i&&p(i)},j=(()=>{let e=[],t=new Date;if("1d"===f)for(let t=9;t<=18;t++){let s=t>12?`${t-12} PM`:`${t} AM`;e.push({label:s,value:Math.floor(200*Math.random())})}else if("7d"===f){let s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let a=6;a>=0;a--){let l=new Date(t);l.setDate(t.getDate()-a),e.push({label:s[l.getDay()],value:Math.floor(800*Math.random())+100})}}else if("1m"===f)for(let t=1;t<=4;t++)e.push({label:`Wk ${t}`,value:Math.floor(3e3*Math.random())+500});else if(["3m","6m","1y"].includes(f)){let s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a="3m"===f?3:"6m"===f?6:12;for(let l=a-1;l>=0;l--){let a=new Date(t);a.setMonth(t.getMonth()-l),e.push({label:s[a.getMonth()],value:Math.floor(1e4*Math.random())+2e3})}}return e})();if(x)return(0,t.jsx)("div",{className:"p-8 text-center text-slate-500 animate-pulse",children:"Loading dashboard..."});if(!e)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center h-[60vh] animate-in fade-in slide-in-from-bottom-4",children:[(0,t.jsx)("div",{className:"bg-indigo-50 p-6 rounded-full dark:bg-slate-800 mb-6",children:(0,t.jsx)(i.ShoppingBag,{className:"w-12 h-12 text-indigo-500"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"No Store Selected"}),(0,t.jsx)("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mb-8",children:"You don't have any active stores selected. Please select a store from the dropdown menu in the header, or create a new one to get started."})]});let N=[{name:"Total Revenue",value:`GHS ${h.revenue.toFixed(2)}`,change:"+2.5%",trend:"up",icon:d.DollarSign,color:"from-emerald-400 to-teal-500"},{name:"Total Orders",value:h.orders.toString(),change:"+12%",trend:"up",icon:i.ShoppingBag,color:"from-blue-400 to-indigo-500"},{name:"Total Customers",value:h.customers.toString(),change:"+5%",trend:"up",icon:r.Users,color:"from-orange-400 to-rose-500"},{name:"Products Sold",value:h.productsSold.toString(),change:"+8%",trend:"up",icon:l.TrendingUp,color:"from-violet-400 to-purple-500"}];return(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Dashboard Overview"}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Welcome back. Here's what's happening at ",(0,t.jsx)("span",{className:"font-semibold text-indigo-600 dark:text-indigo-400",children:e.name})," today."]})]}),(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:N.map(e=>(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white p-6 shadow-sm transition-all hover:shadow-md dark:bg-slate-800 border border-slate-100 dark:border-slate-700 group",children:[(0,t.jsx)("div",{className:`absolute -right-6 -top-6 h-24 w-24 rounded-full opacity-10 blur-xl bg-gradient-to-br ${e.color} group-hover:opacity-20 transition-opacity`}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:e.name}),(0,t.jsx)("p",{className:"mt-2 text-3xl font-bold text-slate-900 dark:text-white",children:e.value})]}),(0,t.jsx)("div",{className:`rounded-xl bg-gradient-to-br ${e.color} p-3 text-white shadow-lg`,children:(0,t.jsx)(e.icon,{className:"h-6 w-6"})})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,t.jsx)(o.ArrowUpRight,{className:"mr-1 h-4 w-4 text-emerald-500"}),(0,t.jsx)("span",{className:"text-emerald-500",children:e.change}),(0,t.jsx)("span",{className:"ml-2 text-slate-400",children:"vs last month"})]})]},e.name))}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 rounded-2xl border border-slate-100 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Revenue Analytics"}),(0,t.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"rounded-lg border border-slate-200 bg-slate-50 px-3 py-1 text-sm outline-none dark:border-slate-700 dark:bg-slate-900",children:[(0,t.jsx)("option",{value:"1d",children:"Today (1d)"}),(0,t.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,t.jsx)("option",{value:"1m",children:"Last 30 Days"}),(0,t.jsx)("option",{value:"3m",children:"Last 3 Months"}),(0,t.jsx)("option",{value:"6m",children:"Last 6 Months"}),(0,t.jsx)("option",{value:"1y",children:"Last Year"})]})]}),(0,t.jsx)("div",{className:"flex h-80 items-end gap-2 sm:gap-4 justify-between pb-2 px-2",children:h.revenue>0?j.map((e,s)=>(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 group flex-1",children:[(0,t.jsx)("div",{className:"w-full h-full flex items-end justify-center",children:(0,t.jsx)("div",{className:"w-full max-w-[40px] bg-indigo-100 dark:bg-indigo-900/30 rounded-t-lg relative group-hover:bg-indigo-200 dark:group-hover:bg-indigo-800 transition-all overflow-hidden",style:{height:`${e.value/(Math.max(...j.map(e=>e.value))||1)*100}%`,minHeight:"4px"},children:(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-indigo-500 opacity-80 h-full w-full transform translate-y-full group-hover:translate-y-0 transition-transform duration-500"})})}),(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-slate-400 font-medium truncate w-full text-center",children:e.label})]},s)):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-slate-400 h-full w-full",children:[(0,t.jsx)(l.TrendingUp,{className:"h-10 w-10 mb-2 opacity-20"}),(0,t.jsx)("p",{children:"No revenue data available yet."}),(0,t.jsx)("p",{className:"text-xs opacity-60",children:"Complete a sale in POS to see analytics."})]})})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-100 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Recent Orders"}),(0,t.jsx)(c.default,{href:"/dashboard/sales/history",className:"text-sm font-medium text-indigo-600 hover:text-indigo-700 dark:text-indigo-400",children:"View All"})]}),(0,t.jsx)("div",{className:"space-y-6",children:0===g.length?(0,t.jsx)("div",{className:"text-center text-slate-500 py-8",children:"No recent orders found."}):g.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 text-slate-500 dark:bg-slate-900 dark:text-slate-400",children:(0,t.jsx)(i.ShoppingBag,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.customers?.name||"Guest"}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:["#",e.id.toString().slice(0,6)," â€¢ ",new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["GHS ",e.total_amount.toFixed(2)]}),(0,t.jsx)("span",{className:`inline-block rounded-full px-2 py-0.5 text-[10px] font-medium ${"completed"===e.status?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-slate-100 text-slate-700"}`,children:e.status})]})]},e.id))}),(0,t.jsxs)(c.default,{href:"/dashboard/sales/history",className:"mt-6 w-full rounded-lg border border-slate-200 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800 flex items-center justify-center gap-2",children:[(0,t.jsx)(n.Clock,{className:"w-4 h-4"})," View Transactions History"]})]})]})]})}e.s(["default",()=>x])}]);