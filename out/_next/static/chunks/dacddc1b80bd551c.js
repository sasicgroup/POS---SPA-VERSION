(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},61012,e=>{"use strict";var t=e.i(43476),s=e.i(94690),a=e.i(56088),l=e.i(81239),r=e.i(55436),d=e.i(7233),i=e.i(83086),o=e.i(15338),n=e.i(27612),c=e.i(75254);let x=(0,c.default)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),m=(0,c.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,c.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var h=e.i(37727),g=e.i(88511);let p=(0,c.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);var b=e.i(68553),f=e.i(1928),k=e.i(71645);e.i(22964);var j=e.i(99776);function v(){let{activeStore:e}=(0,s.useAuth)(),{products:c,isLoading:v,addProduct:w,activeCategories:N,deleteProduct:y,updateProduct:C}=(0,a.useInventory)(),{showToast:S}=(0,l.useToast)(),[P,A]=(0,k.useState)(!1),[L,M]=(0,k.useState)({name:"",sku:"",category:"",stock:0,price:0,costPrice:0,status:"In Stock",image:"https://images.unsplash.com/photo-1590874103328-eac38a683ce7",video:""}),[z,I]=(0,k.useState)(!1),[$,V]=(0,k.useState)(null),[D,q]=(0,k.useState)([]),[R,T]=(0,k.useState)(""),[B,U]=(0,k.useState)("All"),[E,F]=(0,k.useState)("url"),[G,O]=(0,k.useState)(!1),[H,J]=(0,k.useState)(null),[K,_]=(0,k.useState)({reorderCandidates:[],totalValue:0,lowStockCount:0});(0,k.useEffect)(()=>()=>{},[]);let X=c.filter(e=>{let t=e.name.toLowerCase().includes(R.toLowerCase())||e.sku.toLowerCase().includes(R.toLowerCase()),s="All"===B||e.category===B;return t&&s}),W=e=>{q(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Y=()=>{D.length===X.length?q([]):q(X.map(e=>e.id))},[Q,Z]=(0,k.useState)(""),ee=(0,k.useRef)(null);(0,k.useEffect)(()=>{if(G)Z(""),setTimeout(()=>{if(ee.current)try{ee.current.clear()}catch(e){console.error("Clear error",e)}let e=new j.Html5Qrcode("scanner-reader");ee.current=e,e.start({facingMode:"environment"},{fps:10,qrbox:{width:200,height:200},aspectRatio:1},async(e,t)=>{if(ee.current&&ee.current.isScanning)try{await ee.current.stop(),ee.current.clear()}catch(e){console.error("Stop error",e)}et(e)},e=>{}).catch(e=>{console.error("Camera start error:",e),Z("Unable to access camera. Please ensure you have granted permission.")})},100);else if(ee.current)try{ee.current.isScanning&&ee.current.stop().then(()=>{ee.current?.clear(),ee.current=null}).catch(e=>console.error("Stop failed",e))}catch(e){console.error(e)}return()=>{if(ee.current)try{ee.current.isScanning&&ee.current.stop().catch(console.error),ee.current.clear()}catch(e){console.error("Cleanup error",e)}}},[G]);let et=e=>{if(!e)return;let t=c.find(t=>t.sku&&t.sku.toLowerCase().trim()===e.toLowerCase().trim());t?(q([t.id]),T(t.sku),O(!1),S("success",`Product found: ${t.name}`),setTimeout(()=>{let e=document.getElementById(`product-${t.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)):(M({...L,sku:e}),A(!0),O(!1),S("info","Product not found. Create a new one with this SKU."))},[es,ea]=(0,k.useState)(null),[el,er]=(0,k.useState)(null);return e?(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 relative",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Inventory Management"}),(0,t.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Manage products for ",(0,t.jsx)("span",{className:"font-semibold text-indigo-600",children:e.name})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{let e=c.filter(e=>e.stock>0&&e.stock<=5).sort((e,t)=>e.stock-t.stock).slice(0,3),t=c.filter(e=>e.stock<=5).length;_({reorderCandidates:e,totalValue:c.reduce((e,t)=>e+t.price*t.stock,0),lowStockCount:t}),I(!0)},className:"flex items-center gap-2 rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-sm font-medium text-indigo-700 transition-colors hover:bg-indigo-100 dark:border-indigo-900/50 dark:bg-indigo-900/20 dark:text-indigo-400",children:[(0,t.jsx)(i.Sparkles,{className:"h-4 w-4"}),"AI Optmize"]}),(0,t.jsxs)("button",{onClick:()=>O(!0),className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700",children:[(0,t.jsx)(b.Camera,{className:"h-4 w-4"}),"Scan"]}),(0,t.jsxs)("button",{onClick:()=>A(!0),className:"flex items-center gap-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700 active:bg-indigo-800 shadow-lg shadow-indigo-500/30",children:[(0,t.jsx)(d.Plus,{className:"h-4 w-4"}),"Add Product"]})]})]}),P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl dark:bg-slate-900 animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:es?"Edit Product":"Add New Product"}),(0,t.jsxs)("button",{onClick:()=>{A(!1),ea(null)},className:"rounded-full p-2 hover:bg-slate-100 dark:hover:bg-slate-800",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)("svg",{className:"h-5 w-5 text-slate-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t={...L,status:0===L.stock?"Out of Stock":L.stock<10?"Low Stock":"In Stock"};es?(C({...t,id:es}),S("success","Product updated successfully")):(w(t),S("success","Product created successfully")),A(!1),ea(null),M({name:"",sku:"",category:"",stock:0,price:0,costPrice:0,status:"In Stock",image:"https://images.unsplash.com/photo-1590874103328-eac38a683ce7",video:""})},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Product Name"}),(0,t.jsx)("input",{required:!0,type:"text",className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.name,onChange:e=>M({...L,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Product Image"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2 p-1 bg-slate-100 dark:bg-slate-800/50 rounded-lg",children:[(0,t.jsx)("button",{type:"button",onClick:()=>F("url"),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${"url"===E?"bg-white text-indigo-600 shadow-sm dark:bg-slate-700 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:"Image URL"}),(0,t.jsx)("button",{type:"button",onClick:()=>F("upload"),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${"upload"===E?"bg-white text-indigo-600 shadow-sm dark:bg-slate-700 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:"Upload Image"})]}),"url"===E?(0,t.jsx)("input",{type:"text",placeholder:"https://example.com/image.jpg",className:"w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.image,onChange:e=>M({...L,image:e.target.value})}):(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"relative flex items-center justify-center w-full",children:(0,t.jsxs)("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-lg cursor-pointer bg-slate-50 dark:hover:bg-slate-800 dark:bg-slate-800/50 hover:bg-slate-100 dark:border-slate-600 dark:hover:border-slate-500",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-4 text-slate-500 dark:text-slate-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:(0,t.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),(0,t.jsxs)("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"SVG, PNG, JPG or GIF (MAX. 2MB)"})]}),(0,t.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{M({...L,image:e.result})},e.readAsDataURL(t)}}})]})}),L.image&&L.image.startsWith("data:image")&&(0,t.jsx)("div",{className:"mt-2 flex items-center justify-center p-2 border border-slate-200 rounded-lg dark:border-slate-700",children:(0,t.jsx)("img",{src:L.image,alt:"Preview",className:"h-20 object-contain rounded-md"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Video URL (Optional)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"YouTube link or direct video URL",className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white pl-10",value:L.video||"",onChange:e=>M({...L,video:e.target.value})}),(0,t.jsx)(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"SKU"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{required:!0,type:"text",value:L.sku,className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white pr-10",onChange:e=>M({...L,sku:e.target.value})}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),O(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 rounded-md transition-colors z-10 cursor-pointer",title:"Scan Barcode",children:(0,t.jsx)(o.Scan,{className:"h-4 w-4"})})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e="SKU-"+Math.floor(1e5+9e5*Math.random());M({...L,sku:e})},className:"px-3 py-2 mt-1 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-bold hover:bg-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-400 dark:hover:bg-indigo-900/50 transition-colors",children:"Generate"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),(0,t.jsxs)("select",{className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.category,onChange:e=>M({...L,category:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Select..."}),N.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Cost Price (GHS)"}),(0,t.jsx)("input",{required:!0,type:"number",step:"0.01",className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.costPrice,onChange:e=>M({...L,costPrice:parseFloat(e.target.value)})}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"For profit calc"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Selling Price (GHS)"}),(0,t.jsx)("input",{required:!0,type:"number",step:"0.01",className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.price,onChange:e=>M({...L,price:parseFloat(e.target.value)})})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Stock"}),(0,t.jsx)("input",{required:!0,type:"number",className:"mt-1 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",value:L.stock,onChange:e=>M({...L,stock:parseInt(e.target.value)})})]})}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-indigo-600 py-3 font-bold text-white shadow-lg shadow-indigo-500/30 hover:bg-indigo-700",children:es?"Update Product":"Create Product"})})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search products...",className:"w-full rounded-lg border border-slate-200 bg-white py-2 pl-10 pr-4 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",onChange:e=>T(e.target.value)})]}),(0,t.jsxs)("select",{className:"w-full sm:w-48 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 dark:border-slate-800 dark:bg-slate-800 dark:text-white",onChange:e=>U(e.target.value),children:[(0,t.jsx)("option",{value:"All",children:"All Categories"}),N.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsxs)("button",{onClick:Y,className:"px-3 py-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-800 dark:text-slate-300 flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(m,{className:`h-4 w-4 ${D.length===X.length&&X.length>0?"text-indigo-600":"text-slate-400"}`}),D.length===X.length&&X.length>0?"Deselect All":"Select All"]})]}),(0,t.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-x-auto dark:bg-slate-800 dark:border-slate-700 pb-20 lg:pb-0",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[(0,t.jsx)("thead",{className:"bg-slate-50 dark:bg-slate-800/50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left",children:(0,t.jsx)("button",{onClick:Y,className:"flex items-center",children:(0,t.jsx)(m,{className:`h-5 w-5 ${D.length===X.length&&X.length>0?"text-indigo-600":"text-slate-300"}`})})}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Product"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Video"}),(0,t.jsx)("th",{scope:"col",className:"hidden sm:table-cell px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"SKU / Category"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Stock"}),(0,t.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Price"}),(0,t.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,t.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-slate-200 dark:bg-slate-800 dark:divide-slate-700",children:v?Array.from({length:5}).map((e,s)=>(0,t.jsxs)("tr",{className:"animate-pulse",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"h-5 w-5 bg-slate-200 dark:bg-slate-700 rounded"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-slate-200 dark:bg-slate-700 rounded-lg"}),(0,t.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-32 bg-slate-200 dark:bg-slate-700 rounded"}),(0,t.jsx)("div",{className:"h-3 w-20 bg-slate-200 dark:bg-slate-700 rounded"})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"h-5 w-5 bg-slate-200 dark:bg-slate-700 rounded"})}),(0,t.jsx)("td",{className:"hidden sm:table-cell px-6 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 w-24 bg-slate-200 dark:bg-slate-700 rounded"}),(0,t.jsx)("div",{className:"h-3 w-16 bg-slate-200 dark:bg-slate-700 rounded"})]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"h-6 w-20 bg-slate-200 dark:bg-slate-700 rounded-full"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"h-4 w-16 bg-slate-200 dark:bg-slate-700 rounded"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("div",{className:"h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded-lg"}),(0,t.jsx)("div",{className:"h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded-lg"}),(0,t.jsx)("div",{className:"h-8 w-8 bg-slate-200 dark:bg-slate-700 rounded-lg"})]})})]},`skeleton-${s}`)):0===X.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"text-slate-400 dark:text-slate-500",children:[(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:"No products found"}),(0,t.jsx)("p",{className:"text-sm",children:"Add your first product to get started"})]})})}):X.map(s=>(0,t.jsxs)("tr",{id:`product-${s.id}`,className:`hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors cursor-pointer ${D.includes(s.id)?"bg-indigo-50/50 dark:bg-indigo-900/10":""}`,onClick:e=>{e.target.closest("button")||W(s.id)},children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),W(s.id)},className:"text-slate-400 hover:text-indigo-600",children:D.includes(s.id)?(0,t.jsx)(m,{className:"h-5 w-5 text-indigo-600"}):(0,t.jsx)(u,{className:"h-5 w-5"})})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,t.jsx)("img",{className:"h-10 w-10 rounded-lg object-cover",src:s.image,alt:s.name})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.name}),(0,t.jsx)("div",{className:"text-xs text-slate-500 sm:hidden",children:s.sku})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:s.video?(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),J(s.video||null)},className:"text-pink-600 hover:text-pink-900 dark:text-pink-400 dark:hover:text-pink-300 p-2 hover:bg-pink-50 rounded-lg dark:hover:bg-pink-900/30 transition-colors",title:"Watch Video",children:(0,t.jsx)(p,{className:"h-5 w-5"})}):(0,t.jsx)("div",{className:"flex justify-center w-9",children:(0,t.jsx)(p,{className:"h-5 w-5 text-slate-200 dark:text-slate-700"})})}),(0,t.jsxs)("td",{className:"hidden sm:table-cell px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm text-slate-900 dark:text-white",children:s.sku}),(0,t.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.category})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"In Stock"===s.status?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"Low Stock"===s.status?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400":"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[s.stock," Units"]})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:["GHS ",s.price.toFixed(2)]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),(t=>{if(!e)return;let s=window.open("","_blank","width=300,height=200");if(!s)return;let a=`
            <html>
                <head>
                    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
                </head>
                <body style="text-align: center; padding: 20px; font-family: sans-serif;">
                    <div style="font-weight: bold; margin-bottom: 5px;">${e.name}</div>
                    <div style="font-size: 12px; margin-bottom: 10px;">${t.name}</div>
                    <svg id="barcode"></svg>
                    <script>
                        JsBarcode("#barcode", "${t.sku}", {
                            format: "CODE128",
                            width: 2,
                            height: 40,
                            displayValue: true
                        });
                        setTimeout(() => {
                            window.print();
                            window.close();
                        }, 500);
                    </script>
                </body>
            </html>
        `;s.document.write(a),s.document.close(),s.focus()})(s)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 p-2 hover:bg-indigo-50 rounded-lg dark:hover:bg-indigo-900/30",title:"Print Barcode",children:(0,t.jsx)(x,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation();let t=[];try{let e=localStorage.getItem("sms_cart");e&&(t=JSON.parse(e))}catch(e){console.error(e)}let a=t.findIndex(e=>e.id===s.id);a>=0?t[a].quantity+=1:t.push({...s,quantity:1});try{localStorage.setItem("sms_cart",JSON.stringify(t))}catch(e){console.error("Failed to save cart",e),S("error","Cart storage full")}S("success",`Added ${s.name} to cart`)},className:"text-emerald-600 hover:text-emerald-900 dark:text-emerald-400 dark:hover:text-emerald-300 p-2 hover:bg-emerald-50 rounded-lg dark:hover:bg-emerald-900/30",title:"Add to Cart",children:(0,t.jsx)(f.ShoppingCart,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),M({name:s.name,sku:s.sku,category:s.category,stock:s.stock,price:s.price,costPrice:s.costPrice||0,status:s.status||"In Stock",image:s.image||"https://images.unsplash.com/photo-1590874103328-eac38a683ce7",video:s.video||""}),ea(s.id),A(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 p-2 hover:bg-blue-50 rounded-lg dark:hover:bg-blue-900/30",title:"Edit Product",children:(0,t.jsx)(g.Edit,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),D.length>0&&D.includes(s.id),er({id:s.id,name:s.name})},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 hover:bg-red-50 rounded-lg dark:hover:bg-red-900/30",title:"Delete Product",children:(0,t.jsx)(n.Trash2,{className:"h-4 w-4"})})]})})]},s.id))})]})}),(0,t.jsx)("div",{className:`fixed bottom-20 lg:bottom-4 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4 z-[60] transition-all duration-300 ${D.length>0?"translate-y-0 opacity-100":"translate-y-[200%] opacity-0"}`,children:(0,t.jsxs)("div",{className:"bg-slate-900 text-white rounded-2xl shadow-2xl p-4 flex items-center justify-between dark:bg-white dark:text-slate-900 border border-slate-800 dark:border-slate-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",children:D.length}),(0,t.jsx)("span",{className:"font-medium text-sm hidden sm:inline-block",children:"Selected"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{if(!e)return;let t=c.filter(e=>D.includes(e.id));if(0===t.length)return;let s=window.open("","_blank","width=800,height=600");if(!s)return;let a=`
            <html>
                <head>
                    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
                    <style>
                        body { font-family: sans-serif; padding: 20px; }
                        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; }
                        .item { text-align: center; border: 1px dashed #ccc; padding: 10px; page-break-inside: avoid; }
                        @media print { .item { break-inside: avoid; } }
                    </style>
                </head>
                <body>
                    <div class="grid">
                        ${t.map(t=>`
                            <div class="item">
                                <div style="font-weight: bold; font-size: 10px; margin-bottom: 5px;">${e.name}</div>
                                <div style="font-size: 10px; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${t.name}</div>
                                <svg class="barcode" data-sku="${t.sku}"></svg>
                                <div style="font-weight: bold; font-size: 12px; margin-top: 2px;">GHS ${t.price.toFixed(2)}</div>
                            </div>
                        `).join("")}
                    </div>
                    <script>
                        document.querySelectorAll('.barcode').forEach(el => {
                            JsBarcode(el, el.dataset.sku, {
                                format: "CODE128",
                                width: 1.5,
                                height: 30,
                                fontSize: 10,
                                displayValue: true
                            });
                        });
                        setTimeout(() => {
                            window.print();
                            window.close();
                        }, 1000);
                    </script>
                </body>
            </html>
        `;s.document.write(a),s.document.close()},className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white transition-colors dark:bg-slate-100 dark:text-slate-600 dark:hover:bg-slate-200 dark:hover:text-slate-900",children:[(0,t.jsx)(x,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Barcodes"})]}),(0,t.jsxs)("button",{onClick:()=>{let e=c.filter(e=>D.includes(e.id));if(0===e.length)return;let t=[];try{let e=localStorage.getItem("sms_cart");e&&(t=JSON.parse(e))}catch(e){console.error(e)}let s=0;e.forEach(e=>{let a=t.findIndex(t=>t.id===e.id);a>=0?t[a].quantity+=1:t.push({...e,quantity:1}),s++});try{localStorage.setItem("sms_cart",JSON.stringify(t))}catch(e){console.error("Failed to save cart",e),S("error","Cart storage full")}S("success",`${s} items added to cart`),q([])},className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600/10 text-emerald-500 hover:bg-emerald-600 hover:text-white transition-all",children:[(0,t.jsx)(f.ShoppingCart,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Add to Cart"})]}),(0,t.jsxs)("button",{onClick:()=>{0===D.length||confirm(`Are you sure you want to delete ${D.length} products?`)&&(D.forEach(e=>y(e)),S("success",`Deleted ${D.length} products successfully`),q([]))},className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-red-600/10 text-red-500 hover:bg-red-600 hover:text-white transition-all",children:[(0,t.jsx)(n.Trash2,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Delete"})]}),(0,t.jsx)("div",{className:"w-px h-6 bg-slate-700 dark:bg-slate-200 mx-1"}),(0,t.jsx)("button",{onClick:()=>q([]),className:"p-2 rounded-full hover:bg-slate-800 text-slate-400 dark:hover:bg-slate-100",children:(0,t.jsx)(h.X,{className:"h-5 w-5"})})]})]})}),G&&(0,t.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/95 p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl bg-slate-900 overflow-hidden shadow-2xl border border-slate-800",children:[(0,t.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,t.jsxs)("button",{onClick:()=>{O(!1)},className:"rounded-full bg-black/50 p-2 text-white hover:bg-black/70 backdrop-blur-sm transition-colors",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)(h.X,{className:"h-6 w-6"})]})}),(0,t.jsx)("div",{className:"relative aspect-[4/3] bg-black overflow-hidden rounded-lg",children:(0,t.jsx)("div",{id:"scanner-reader",className:"w-full h-full"})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:(0,t.jsx)("p",{className:"text-sm font-medium text-white shadow-sm bg-black/50 inline-block px-3 py-1 rounded-full backdrop-blur-sm",children:Q||"Align barcode within frame"})}),(0,t.jsx)("div",{className:"p-6 bg-slate-900 border-t border-slate-800",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-white font-medium",children:"Scanner Active"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"animate-ping h-2 w-2 rounded-full bg-indigo-500"}),(0,t.jsx)("span",{className:"text-xs text-indigo-400",children:"Detecting..."})]})]})})]})}),z&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"w-full max-w-lg rounded-2xl bg-white p-6 shadow-2xl dark:bg-slate-900 animate-in zoom-in-95 duration-200 scale-100",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Sparkles,{className:"h-5 w-5 text-indigo-600 animate-pulse"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"AI Inventory Analysis"})]}),(0,t.jsxs)("button",{onClick:()=>I(!1),className:"rounded-full p-2 hover:bg-slate-100 dark:hover:bg-slate-800",children:[(0,t.jsx)("span",{className:"sr-only",children:"Close"}),(0,t.jsx)("svg",{className:"h-5 w-5 text-slate-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[K.reorderCandidates.length>0?(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-indigo-50 border border-indigo-100 dark:bg-indigo-900/20 dark:border-indigo-900/40",children:[(0,t.jsxs)("h3",{className:"font-bold text-indigo-900 dark:text-indigo-100 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-indigo-200 text-indigo-700 text-xs dark:bg-indigo-800 dark:text-indigo-300",children:"1"}),"Reorder Recommendation"]}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:K.reorderCandidates.map(e=>(0,t.jsx)("div",{className:"text-sm text-indigo-800/80 dark:text-indigo-300/80 flex justify-between items-center border-b border-indigo-100 dark:border-indigo-800/50 pb-1 last:border-0",children:(0,t.jsxs)("span",{children:['"',e.name,'" is running low (',e.stock," units left)."]})},e.id))}),(0,t.jsx)("p",{className:"mt-2 text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:"Consider restocking these items soon."})]}):(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-green-50 border border-green-100 dark:bg-green-900/20 dark:border-green-900/40",children:[(0,t.jsxs)("h3",{className:"font-bold text-green-900 dark:text-green-100 flex items-center gap-2",children:[(0,t.jsx)(m,{className:"h-5 w-5"}),"Stock Levels Healthy"]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-green-800/80 dark:text-green-300/80",children:"Great job! No items are critically low on stock."})]}),(0,t.jsxs)("div",{className:"p-4 rounded-xl bg-amber-50 border border-amber-100 dark:bg-amber-900/20 dark:border-amber-900/40",children:[(0,t.jsxs)("h3",{className:"font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-amber-200 text-amber-700 text-xs dark:bg-amber-800 dark:text-amber-300",children:"2"}),"Inventory Value"]}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-amber-800/80 dark:text-amber-300/80",children:["Your total inventory is valued at ",(0,t.jsxs)("span",{className:"font-bold",children:["GHS ",K.totalValue.toFixed(2)]}),"."]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-amber-700 dark:text-amber-500",children:K.lowStockCount>0?`${K.lowStockCount} items are low on stock.`:"Inventory is fully stocked."})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,t.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 dark:text-slate-400",children:"Dismiss"}),(0,t.jsx)("button",{className:"ml-2 rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700",children:"Apply All Actions"})]})]})}),H&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in duration-200 p-4",children:(0,t.jsxs)("div",{className:"relative w-full max-w-5xl aspect-video bg-black rounded-2xl overflow-hidden shadow-2xl border border-white/10",children:[(0,t.jsx)("button",{onClick:()=>J(null),className:"absolute top-4 right-4 z-20 p-2 bg-black/50 text-white/80 hover:text-white rounded-full hover:bg-black/80 backdrop-blur-sm transition-all",children:(0,t.jsx)(h.X,{className:"h-6 w-6"})}),(0,t.jsx)("iframe",{src:(e=>{if(!e)return"";if(e.includes("youtube.com")||e.includes("youtu.be")){let t="";return t=e.includes("v=")?e.split("v=")[1]?.split("&")[0]:e.split("/").pop()||"",`https://www.youtube.com/embed/${t}?autoplay=1`}return e})(H),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}),el&&(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-200 p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-sm rounded-2xl bg-white p-6 shadow-2xl dark:bg-slate-900",children:[(0,t.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:(0,t.jsx)(n.Trash2,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),(0,t.jsx)("h3",{className:"text-lg font-bold text-center text-slate-900 dark:text-white mb-2",children:"Delete Product?"}),(0,t.jsxs)("p",{className:"text-sm text-center text-slate-500 mb-6",children:["Are you sure you want to delete ",(0,t.jsx)("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:el.name}),"? This action cannot be undone."]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>er(null),className:"flex-1 rounded-xl bg-slate-100 py-3 font-medium text-slate-700 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-300",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>{y(el.id),er(null),S("success","Product deleted successfully")},className:"flex-1 rounded-xl bg-red-600 py-3 font-bold text-white hover:bg-red-700",children:"Delete"})]})]})})]}):null}e.s(["default",()=>v],61012)}]);